[{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\components\\Navbar.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\context\\ThemeContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":41,"column":10,"nodeType":"Identifier","messageId":"namedExport","endLine":41,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState } from 'react';\r\n\r\nconst ThemeContext = createContext();\r\n\r\nexport const ThemeProvider = ({ children }) => {\r\n    const [theme, setTheme] = useState(() => {\r\n        return localStorage.getItem('theme') || 'default';\r\n    });\r\n\r\n    useEffect(() => {\r\n        const root = document.documentElement;\r\n        // Remove all theme attributes first\r\n        root.removeAttribute('data-theme');\r\n\r\n        if (theme !== 'default') {\r\n            root.setAttribute('data-theme', theme);\r\n        }\r\n\r\n        localStorage.setItem('theme', theme);\r\n    }, [theme]);\r\n\r\n    const toggleTheme = (newTheme) => {\r\n        setTheme(newTheme);\r\n    };\r\n\r\n    return (\r\n        <ThemeContext.Provider value={{ theme, toggleTheme }}>\r\n            {children}\r\n        </ThemeContext.Provider>\r\n    );\r\n};\r\n\r\nfunction useTheme() {\r\n    const context = useContext(ThemeContext);\r\n    if (!context) {\r\n        throw new Error('useTheme must be used within a ThemeProvider');\r\n    }\r\n    return context;\r\n}\r\n\r\nexport { useTheme };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\auth\\Login.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\DashboardLayout.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'setUser' is assigned a value but never used. Allowed unused vars must match /^[A-Z_]/u.","line":36,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"setUser"},"fix":{"range":[774,783],"text":""},"desc":"Remove unused variable 'setUser'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Outlet, Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport { useTheme } from '../../context/ThemeContext';\r\nimport {\r\n    LayoutDashboard,\r\n    Users,\r\n    Radio,\r\n    Calendar,\r\n    Vote,\r\n    BarChart3,\r\n    Building2,\r\n    Inbox,\r\n    Settings,\r\n    LogOut,\r\n    Menu,\r\n    X,\r\n    Sun,\r\n    Moon,\r\n    Cloud,\r\n    Leaf,\r\n    Zap,\r\n    ChevronLeft,\r\n    ChevronRight,\r\n    UserCircle,\r\n    CheckSquare,\r\n    MessageSquare,\r\n    BookOpen,\r\n    HelpCircle\r\n} from 'lucide-react';\r\nimport { AnimatePresence } from 'framer-motion';\r\n\r\nconst DashboardLayout = () => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const { theme, toggleTheme } = useTheme();\r\n    const [user, setUser] = useState(() => {\r\n        const storedUser = localStorage.getItem('user');\r\n        return storedUser ? JSON.parse(storedUser) : null;\r\n    });\r\n    const [isSidebarOpen, setIsSidebarOpen] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            navigate('/login');\r\n        }\r\n\r\n        const handleResize = () => {\r\n            if (window.innerWidth < 768) setIsSidebarOpen(false);\r\n            else setIsSidebarOpen(true);\r\n        };\r\n\r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, [navigate, user]);\r\n\r\n    if (!user) return <div className=\"flex items-center justify-center h-screen\">Loading...</div>;\r\n\r\n    const themes = [\r\n        { name: 'default', icon: <Sun size={18} />, label: 'Default' },\r\n        { name: 'dark', icon: <Moon size={18} />, label: 'Dark' },\r\n        { name: 'sunrise', icon: <Sun size={18} color=\"orange\" />, label: 'Sunrise' },\r\n        { name: 'ocean', icon: <Cloud size={18} color=\"blue\" />, label: 'Ocean' },\r\n        { name: 'nature', icon: <Leaf size={18} color=\"green\" />, label: 'Nature' },\r\n        { name: 'neon', icon: <Zap size={18} color=\"magenta\" />, label: 'Neon' },\r\n    ];\r\n\r\n    const navItems = {\r\n        president: [\r\n            { path: '/dashboard', icon: <LayoutDashboard size={20} />, label: 'Overview' },\r\n            { path: '/dashboard/president/members', icon: <Users size={20} />, label: 'Members' },\r\n            { path: '/dashboard/president/broadcast', icon: <Radio size={20} />, label: 'Broadcast' },\r\n            { path: '/dashboard/president/events', icon: <Calendar size={20} />, label: 'Events' },\r\n            { path: '/dashboard/president/elections', icon: <Vote size={20} />, label: 'Elections' },\r\n            { path: '/dashboard/president/analytics', icon: <BarChart3 size={20} />, label: 'Analytics' },\r\n            { path: '/dashboard/president/departments', icon: <Building2 size={20} />, label: 'Departments' },\r\n            { path: '/dashboard/president/inbox', icon: <Inbox size={20} />, label: 'Inbox' },\r\n            { path: '/dashboard/president/system', icon: <Settings size={20} />, label: 'System' },\r\n        ],\r\n        member: [\r\n            { path: '/dashboard', icon: <LayoutDashboard size={20} />, label: 'Overview' },\r\n            { path: '/dashboard/member/profile', icon: <UserCircle size={20} />, label: 'Profile' },\r\n            { path: '/dashboard/member/tasks', icon: <CheckSquare size={20} />, label: 'My Tasks' },\r\n            { path: '/dashboard/member/events', icon: <Calendar size={20} />, label: 'Events' },\r\n            { path: '/dashboard/member/resources', icon: <BookOpen size={20} />, label: 'Resources' },\r\n            { path: '/dashboard/member/vote', icon: <Vote size={20} />, label: 'Vote' },\r\n            { path: '/dashboard/member/support', icon: <HelpCircle size={20} />, label: 'Support' },\r\n        ],\r\n        // Add other roles as needed\r\n    };\r\n\r\n    const currentNavItems = navItems[user.role === 'vp' ? 'president' : user.role] || navItems.member;\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-[var(--bg-primary)] text-[var(--text-primary)] overflow-hidden transition-colors duration-300\">\r\n            {/* Sidebar */}\r\n            <motion.aside\r\n                initial={false}\r\n                animate={{ width: isSidebarOpen ? 260 : 80 }}\r\n                className=\"bg-[var(--card-bg)] border-r border-[var(--border-color)] flex flex-col z-20 shadow-xl\"\r\n            >\r\n                {/* Header */}\r\n                <div className=\"p-4 flex items-center justify-between h-16 border-b border-[var(--border-color)]\">\r\n                    <AnimatePresence mode='wait'>\r\n                        {isSidebarOpen && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"font-bold text-xl tracking-tight text-[var(--primary)]\"\r\n                            >\r\n                                HUSUMS\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                    <button\r\n                        onClick={() => setIsSidebarOpen(!isSidebarOpen)}\r\n                        className=\"p-2 rounded-lg hover:bg-[var(--bg-secondary)] text-[var(--text-secondary)] transition-colors\"\r\n                    >\r\n                        {isSidebarOpen ? <ChevronLeft size={20} /> : <ChevronRight size={20} />}\r\n                    </button>\r\n                </div>\r\n\r\n                {/* User Profile */}\r\n                <div className=\"p-4 border-b border-[var(--border-color)] flex items-center gap-3\">\r\n                    <div className=\"w-10 h-10 rounded-full bg-[var(--primary)] flex items-center justify-center text-white font-bold shrink-0\">\r\n                        {user.firstName[0]}\r\n                    </div>\r\n                    <AnimatePresence>\r\n                        {isSidebarOpen && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, width: 0 }}\r\n                                animate={{ opacity: 1, width: 'auto' }}\r\n                                exit={{ opacity: 0, width: 0 }}\r\n                                className=\"overflow-hidden whitespace-nowrap\"\r\n                            >\r\n                                <p className=\"font-semibold text-sm\">{user.firstName} {user.lastName}</p>\r\n                                <p className=\"text-xs text-[var(--text-secondary)] capitalize\">{user.role}</p>\r\n                            </motion.div>\r\n                        )}\r\n                    </AnimatePresence>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <nav className=\"flex-1 overflow-y-auto p-2 space-y-1 custom-scrollbar\">\r\n                    {currentNavItems.map((item) => {\r\n                        const isActive = location.pathname === item.path;\r\n                        return (\r\n                            <Link\r\n                                key={item.path}\r\n                                to={item.path}\r\n                                className={`flex items-center gap-3 p-3 rounded-lg transition-all duration-200 group relative\r\n                                    ${isActive\r\n                                        ? 'bg-[var(--primary)] text-white shadow-md'\r\n                                        : 'text-[var(--text-secondary)] hover:bg-[var(--bg-secondary)] hover:text-[var(--primary)]'\r\n                                    }`}\r\n                            >\r\n                                <div className=\"shrink-0\">{item.icon}</div>\r\n                                <AnimatePresence>\r\n                                    {isSidebarOpen && (\r\n                                        <motion.span\r\n                                            initial={{ opacity: 0 }}\r\n                                            animate={{ opacity: 1 }}\r\n                                            exit={{ opacity: 0 }}\r\n                                            className=\"whitespace-nowrap font-medium\"\r\n                                        >\r\n                                            {item.label}\r\n                                        </motion.span>\r\n                                    )}\r\n                                </AnimatePresence>\r\n                                {!isSidebarOpen && (\r\n                                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-black text-white text-xs rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50\">\r\n                                        {item.label}\r\n                                    </div>\r\n                                )}\r\n                            </Link>\r\n                        );\r\n                    })}\r\n                </nav>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"p-4 border-t border-[var(--border-color)] space-y-2\">\r\n                    {/* Theme Switcher */}\r\n                    <div className=\"relative group\">\r\n                        <button className={`w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-secondary)] text-[var(--text-secondary)] transition-colors ${!isSidebarOpen && 'justify-center'}`}>\r\n                            <Sun size={20} />\r\n                            {isSidebarOpen && <span>Theme</span>}\r\n                        </button>\r\n\r\n                        {/* Theme Dropdown */}\r\n                        <div className=\"absolute bottom-full left-0 mb-2 w-48 bg-[var(--card-bg)] border border-[var(--border-color)] rounded-lg shadow-xl p-2 hidden group-hover:block z-50\">\r\n                            {themes.map(t => (\r\n                                <button\r\n                                    key={t.name}\r\n                                    onClick={() => toggleTheme(t.name)}\r\n                                    className={`w-full flex items-center gap-2 p-2 rounded hover:bg-[var(--bg-secondary)] text-sm ${theme === t.name ? 'text-[var(--primary)] font-bold' : ''}`}\r\n                                >\r\n                                    {t.icon} {t.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={() => {\r\n                            localStorage.removeItem('user');\r\n                            localStorage.removeItem('token');\r\n                            navigate('/login');\r\n                        }}\r\n                        className={`w-full flex items-center gap-3 p-2 rounded-lg hover:bg-red-50 text-red-500 transition-colors ${!isSidebarOpen && 'justify-center'}`}\r\n                    >\r\n                        <LogOut size={20} />\r\n                        {isSidebarOpen && <span>Logout</span>}\r\n                    </button>\r\n                </div>\r\n            </motion.aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 overflow-y-auto bg-[var(--bg-secondary)] relative\">\r\n                <div className=\"p-6 max-w-7xl mx-auto min-h-full\">\r\n                    <Outlet />\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DashboardLayout;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\DashboardOverview.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  40 |\n  41 |     useEffect(() => {\n> 42 |         fetchStats();\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |     }, []);\n  44 |\n  45 |     return (","line":42,"column":9,"nodeType":null,"endLine":42,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { api } from '../../utils/api';\r\n\r\nconst DashboardOverview = () => {\r\n    const [stats, setStats] = useState({\r\n        members: 0,\r\n        events: 0,\r\n        elections: 0\r\n    });\r\n\r\n    const fetchStats = async () => {\r\n        try {\r\n            // We don't have a dedicated stats endpoint, but we can fetch lists and count.\r\n            // Or we can add a stats endpoint. For now, let's fetch lists.\r\n            // This is not efficient for large data, but fine for this scale.\r\n\r\n            // Fetch members (Secretary route) - might be restricted.\r\n            // Fetch events (President route) - accessible to all (we just added GET /events).\r\n            // Fetch elections (President route) - accessible to all.\r\n\r\n            // Note: Secretary route /secretary/members is restricted to sec/pres/vp.\r\n            // If the current user is a member, they can't see total members count via that route.\r\n            // Let's just show events and elections for now, or mock members count if we can't access it.\r\n            // Or we can add a public stats endpoint.\r\n\r\n            const [eventsData, electionsData] = await Promise.all([\r\n                api.get('/president/events').catch(() => []),\r\n                api.get('/president/elections').catch(() => [])\r\n            ]);\r\n\r\n            setStats({\r\n                members: 1250, // Placeholder as we can't easily fetch this for everyone without a new endpoint\r\n                events: eventsData.length,\r\n                elections: electionsData.filter(e => e.status === 'ongoing').length\r\n            });\r\n        } catch (error) {\r\n            console.error('Error fetching dashboard stats:', error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchStats();\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            <h1 style={{ marginBottom: '2rem' }}>Dashboard Overview</h1>\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1.5rem' }}>\r\n                <div className=\"card\">\r\n                    <h3>Total Members</h3>\r\n                    <p style={{ fontSize: '2rem', fontWeight: 'bold', color: 'var(--primary)' }}>{stats.members}</p>\r\n                </div>\r\n                <div className=\"card\">\r\n                    <h3>Upcoming Events</h3>\r\n                    <p style={{ fontSize: '2rem', fontWeight: 'bold', color: 'var(--secondary)' }}>{stats.events}</p>\r\n                </div>\r\n                <div className=\"card\">\r\n                    <h3>Active Elections</h3>\r\n                    <p style={{ fontSize: '2rem', fontWeight: 'bold', color: 'var(--accent)' }}>{stats.elections}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DashboardOverview;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\deptHead\\ActionPlan.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\deptHead\\Inbox.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\member\\Attendance.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\member\\DepartmentSelection.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  34 |\n  35 |     useEffect(() => {\n> 36 |         fetchDepartments();\n     |         ^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  37 |         // Ideally we should also fetch current user profile to see if they already have a department\n  38 |         // But for now, let's assume the user object in localStorage might need updating or we fetch profile.\n  39 |         // Let's fetch profile to be sure.","line":36,"column":9,"nodeType":null,"endLine":36,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { api } from '../../../utils/api';\r\n\r\nconst DepartmentSelection = () => {\r\n    const [departments, setDepartments] = useState([]);\r\n    const [selectedDept, setSelectedDept] = useState('');\r\n    const [currentDept, setCurrentDept] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchDepartments = async () => {\r\n        try {\r\n            const data = await api.get('/departments');\r\n            setDepartments(data);\r\n        } catch (error) {\r\n            console.error('Error fetching departments:', error);\r\n        }\r\n    };\r\n\r\n    const fetchProfile = async () => {\r\n        try {\r\n            await api.get('/attendance/my'); // Using this as a proxy to check auth, but better to have /auth/me\r\n            // Actually, let's check localStorage first, or if we have a profile endpoint.\r\n            // We don't have a specific /auth/me endpoint in the list, but we can use any protected route or just rely on localStorage for display initially.\r\n            // Let's try to get user from localStorage for now.\r\n            const user = JSON.parse(localStorage.getItem('user'));\r\n            if (user && user.department) {\r\n                setCurrentDept(user.department);\r\n            }\r\n            setLoading(false);\r\n        } catch {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchDepartments();\r\n        // Ideally we should also fetch current user profile to see if they already have a department\r\n        // But for now, let's assume the user object in localStorage might need updating or we fetch profile.\r\n        // Let's fetch profile to be sure.\r\n        fetchProfile();\r\n    }, []);\r\n\r\n    const handleSelect = async () => {\r\n        if (!selectedDept) return;\r\n        try {\r\n            const res = await api.post('/departments/select', { departmentId: selectedDept });\r\n            alert(res.message);\r\n            setCurrentDept(res.department);\r\n\r\n            // Update local storage\r\n            const user = JSON.parse(localStorage.getItem('user'));\r\n            user.department = res.department;\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n        } catch (error) {\r\n            alert(error.message || 'Failed to join department');\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <h2>My Department</h2>\r\n            <div className=\"card\">\r\n                {currentDept ? (\r\n                    <p>You are currently a member of: <strong>{currentDept}</strong></p>\r\n                ) : (\r\n                    <div>\r\n                        <p style={{ marginBottom: '1rem' }}>You have not joined a department yet. Please select one below:</p>\r\n                        <div style={{ display: 'flex', gap: '1rem', alignItems: 'center' }}>\r\n                            <select\r\n                                className=\"input\"\r\n                                value={selectedDept}\r\n                                onChange={(e) => setSelectedDept(e.target.value)}\r\n                                style={{ maxWidth: '300px' }}\r\n                            >\r\n                                <option value=\"\">Select Department</option>\r\n                                {departments.map(dept => (\r\n                                    <option key={dept.id} value={dept.id}>{dept.name}</option>\r\n                                ))}\r\n                            </select>\r\n                            <button className=\"btn btn-primary\" onClick={handleSelect}>Join Department</button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DepartmentSelection;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\member\\Events.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  35 |\n  36 |     useEffect(() => {\n> 37 |         fetchEventsAndRsvps();\n     |         ^^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  38 |     }, []);\n  39 |\n  40 |     const handleRsvp = async (eventId, status) => {","line":37,"column":9,"nodeType":null,"endLine":37,"endColumn":28}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Events = () => {\r\n    const [events, setEvents] = useState([]);\r\n    const [myRsvps, setMyRsvps] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchEventsAndRsvps = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const headers = { Authorization: `Bearer ${token}` };\r\n\r\n            // Fetch all events (assuming public or president endpoint works for now, or we need a new one)\r\n            // Using president endpoint for now as it returns all events\r\n            const eventsRes = await axios.get('http://localhost:5000/api/president/events', { headers });\r\n\r\n            // Fetch my RSVPs\r\n            const rsvpsRes = await axios.get('http://localhost:5000/api/rsvp/my-rsvps', { headers });\r\n\r\n            // Map RSVPs for easy lookup\r\n            const rsvpMap = {};\r\n            rsvpsRes.data.forEach(rsvp => {\r\n                rsvpMap[rsvp.eventId] = rsvp.status;\r\n            });\r\n\r\n            setEvents(eventsRes.data);\r\n            setMyRsvps(rsvpMap);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchEventsAndRsvps();\r\n    }, []);\r\n\r\n    const handleRsvp = async (eventId, status) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            await axios.post(`http://localhost:5000/api/rsvp/${eventId}`, { status }, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            setMyRsvps(prev => ({ ...prev, [eventId]: status }));\r\n            alert(`RSVP updated: ${status}`);\r\n        } catch (error) {\r\n            alert('Error updating RSVP');\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading events...</div>;\r\n\r\n    return (\r\n        <div className=\"card animate-fade-up\">\r\n            <h2 style={{ marginBottom: '2rem' }}>Upcoming Events</h2>\r\n\r\n            {events.length === 0 ? (\r\n                <p>No upcoming events.</p>\r\n            ) : (\r\n                <div style={{ display: 'grid', gap: '1.5rem' }}>\r\n                    {events.map(event => (\r\n                        <div key={event.id} style={{\r\n                            border: '1px solid var(--border-color)',\r\n                            padding: '1.5rem',\r\n                            borderRadius: '0.5rem',\r\n                            backgroundColor: 'var(--bg-body)'\r\n                        }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                                <div>\r\n                                    <h3 style={{ marginBottom: '0.5rem' }}>{event.title}</h3>\r\n                                    <p style={{ color: 'var(--text-secondary)', marginBottom: '0.5rem' }}>\r\n                                        {new Date(event.date).toLocaleDateString()} at {event.venue}\r\n                                    </p>\r\n                                    <p>{event.description}</p>\r\n                                </div>\r\n                                <div style={{ display: 'flex', gap: '0.5rem' }}>\r\n                                    <button\r\n                                        className={`btn ${myRsvps[event.id] === 'going' ? 'btn-primary' : 'btn-secondary'}`}\r\n                                        onClick={() => handleRsvp(event.id, 'going')}\r\n                                    >\r\n                                        Going\r\n                                    </button>\r\n                                    <button\r\n                                        className={`btn ${myRsvps[event.id] === 'maybe' ? 'btn-primary' : 'btn-secondary'}`}\r\n                                        onClick={() => handleRsvp(event.id, 'maybe')}\r\n                                    >\r\n                                        Maybe\r\n                                    </button>\r\n                                    <button\r\n                                        className={`btn ${myRsvps[event.id] === 'not_going' ? 'btn-primary' : 'btn-secondary'}`}\r\n                                        onClick={() => handleRsvp(event.id, 'not_going')}\r\n                                    >\r\n                                        Not Going\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Events;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\member\\Profile.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  51 |\n  52 |     useEffect(() => {\n> 53 |         fetchProfile();\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  54 |     }, []);\n  55 |\n  56 |     const handleChange = (e) => {","line":53,"column":9,"nodeType":null,"endLine":53,"endColumn":21},{"ruleId":"no-undef","severity":2,"message":"'setUser' is not defined.","line":83,"column":13,"nodeType":"Identifier","messageId":"undef","endLine":83,"endColumn":20}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Profile = () => {\r\n    const [formData, setFormData] = useState({\r\n        firstName: '',\r\n        middleName: '',\r\n        lastName: '',\r\n        bio: '',\r\n        major: '',\r\n        academicYear: '',\r\n        phoneNumber: '',\r\n        region: '',\r\n        zone: '',\r\n        woreda: '',\r\n        city: ''\r\n    });\r\n    const [photo, setPhoto] = useState(null);\r\n    const [preview, setPreview] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [message, setMessage] = useState('');\r\n\r\n    const fetchProfile = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const res = await axios.get('http://localhost:5000/api/users/profile', {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setFormData({\r\n                firstName: res.data.firstName || '',\r\n                middleName: res.data.middleName || '',\r\n                lastName: res.data.lastName || '',\r\n                bio: res.data.bio || '',\r\n                major: res.data.major || '',\r\n                academicYear: res.data.academicYear || '',\r\n                phoneNumber: res.data.phoneNumber || '',\r\n                region: res.data.region || '',\r\n                zone: res.data.zone || '',\r\n                woreda: res.data.woreda || '',\r\n                city: res.data.city || ''\r\n            });\r\n            if (res.data.profilePicture) {\r\n                setPreview(`http://localhost:5000${res.data.profilePicture}`);\r\n            }\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error fetching profile:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchProfile();\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handlePhotoChange = (e) => {\r\n        const file = e.target.files[0];\r\n        setPhoto(file);\r\n        setPreview(URL.createObjectURL(file));\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const data = new FormData();\r\n        Object.keys(formData).forEach(key => data.append(key, formData[key]));\r\n        if (photo) {\r\n            data.append('profilePicture', photo);\r\n        }\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const res = await axios.put('http://localhost:5000/api/users/profile', data, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n            setMessage(res.data.message);\r\n            setUser(res.data.user);\r\n            // Update local storage user data if needed\r\n            const storedUser = JSON.parse(localStorage.getItem('user'));\r\n            localStorage.setItem('user', JSON.stringify({ ...storedUser, ...res.data.user }));\r\n        } catch (error) {\r\n            setMessage('Error updating profile');\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"card animate-fade-up\">\r\n            <h2 style={{ marginBottom: '2rem' }}>My Profile</h2>\r\n            {message && <div className=\"alert alert-success\">{message}</div>}\r\n\r\n            <form onSubmit={handleSubmit} style={{ display: 'grid', gridTemplateColumns: '1fr 2fr', gap: '2rem' }}>\r\n                {/* Left Column: Photo & Bio */}\r\n                <div>\r\n                    <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>\r\n                        <div style={{\r\n                            width: '150px', height: '150px',\r\n                            borderRadius: '50%',\r\n                            overflow: 'hidden',\r\n                            margin: '0 auto 1rem',\r\n                            backgroundColor: '#f3f4f6',\r\n                            border: '4px solid var(--primary)'\r\n                        }}>\r\n                            {preview ? (\r\n                                <img src={preview} alt=\"Profile\" style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\r\n                            ) : (\r\n                                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%', color: '#9ca3af' }}>No Photo</div>\r\n                            )}\r\n                        </div>\r\n                        <label className=\"btn btn-secondary\" style={{ cursor: 'pointer' }}>\r\n                            Upload Photo\r\n                            <input type=\"file\" hidden onChange={handlePhotoChange} accept=\"image/*\" />\r\n                        </label>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Bio</label>\r\n                        <textarea\r\n                            name=\"bio\"\r\n                            className=\"input\"\r\n                            rows=\"5\"\r\n                            value={formData.bio}\r\n                            onChange={handleChange}\r\n                            placeholder=\"Tell us about yourself...\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Right Column: Personal Details */}\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n                    <div className=\"form-group\">\r\n                        <label>First Name</label>\r\n                        <input type=\"text\" name=\"firstName\" className=\"input\" value={formData.firstName} onChange={handleChange} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Middle Name</label>\r\n                        <input type=\"text\" name=\"middleName\" className=\"input\" value={formData.middleName} onChange={handleChange} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Last Name</label>\r\n                        <input type=\"text\" name=\"lastName\" className=\"input\" value={formData.lastName} onChange={handleChange} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Phone Number</label>\r\n                        <input type=\"text\" name=\"phoneNumber\" className=\"input\" value={formData.phoneNumber} onChange={handleChange} />\r\n                    </div>\r\n\r\n                    <h3 style={{ gridColumn: '1 / -1', marginTop: '1rem', borderBottom: '1px solid #eee', paddingBottom: '0.5rem' }}>Academic Info</h3>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Major</label>\r\n                        <input type=\"text\" name=\"major\" className=\"input\" value={formData.major} onChange={handleChange} placeholder=\"e.g. Software Engineering\" />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Academic Year</label>\r\n                        <select name=\"academicYear\" className=\"input\" value={formData.academicYear} onChange={handleChange}>\r\n                            <option value=\"\">Select Year</option>\r\n                            <option value=\"1\">1st Year</option>\r\n                            <option value=\"2\">2nd Year</option>\r\n                            <option value=\"3\">3rd Year</option>\r\n                            <option value=\"4\">4th Year</option>\r\n                            <option value=\"5\">5th Year</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <h3 style={{ gridColumn: '1 / -1', marginTop: '1rem', borderBottom: '1px solid #eee', paddingBottom: '0.5rem' }}>Address</h3>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Region</label>\r\n                        <input type=\"text\" name=\"region\" className=\"input\" value={formData.region} onChange={handleChange} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Zone</label>\r\n                        <input type=\"text\" name=\"zone\" className=\"input\" value={formData.zone} onChange={handleChange} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Woreda</label>\r\n                        <input type=\"text\" name=\"woreda\" className=\"input\" value={formData.woreda} onChange={handleChange} />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>City</label>\r\n                        <input type=\"text\" name=\"city\" className=\"input\" value={formData.city} onChange={handleChange} />\r\n                    </div>\r\n\r\n                    <div style={{ gridColumn: '1 / -1', marginTop: '1rem' }}>\r\n                        <button type=\"submit\" className=\"btn btn-primary\">Save Changes</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\member\\Resources.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  34 |\n  35 |     useEffect(() => {\n> 36 |         fetchData();\n     |         ^^^^^^^^^ Avoid calling setState() directly within an effect\n  37 |     }, []);\n  38 |\n  39 |     const handleSubmit = async (e) => {","line":36,"column":9,"nodeType":null,"endLine":36,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Resources = () => {\r\n    const [resources, setResources] = useState([]);\r\n    const [bookings, setBookings] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [formData, setFormData] = useState({\r\n        resourceId: '',\r\n        date: '',\r\n        startTime: '',\r\n        endTime: '',\r\n        purpose: ''\r\n    });\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const headers = { Authorization: `Bearer ${token}` };\r\n\r\n            const [resResources, resBookings] = await Promise.all([\r\n                axios.get('http://localhost:5000/api/resources', { headers }),\r\n                axios.get('http://localhost:5000/api/resources/my-bookings', { headers })\r\n            ]);\r\n\r\n            setResources(resResources.data);\r\n            setBookings(resBookings.data);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const startDateTime = new Date(`${formData.date}T${formData.startTime}`);\r\n            const endDateTime = new Date(`${formData.date}T${formData.endTime}`);\r\n\r\n            await axios.post('http://localhost:5000/api/resources/book', {\r\n                resourceId: formData.resourceId,\r\n                startTime: startDateTime,\r\n                endTime: endDateTime,\r\n                purpose: formData.purpose\r\n            }, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            alert('Booking request submitted!');\r\n            setFormData({ resourceId: '', date: '', startTime: '', endTime: '', purpose: '' });\r\n            fetchData(); // Refresh bookings\r\n        } catch (error) {\r\n            alert('Error creating booking');\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading resources...</div>;\r\n\r\n    return (\r\n        <div className=\"card animate-fade-up\">\r\n            <h2 style={{ marginBottom: '2rem' }}>Resource Booking</h2>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '2rem' }}>\r\n                {/* Booking Form */}\r\n                <div>\r\n                    <h3>Book a Resource</h3>\r\n                    <form onSubmit={handleSubmit} style={{ marginTop: '1rem' }}>\r\n                        <div className=\"form-group\">\r\n                            <label>Resource</label>\r\n                            <select\r\n                                className=\"input\"\r\n                                value={formData.resourceId}\r\n                                onChange={e => setFormData({ ...formData, resourceId: e.target.value })}\r\n                                required\r\n                            >\r\n                                <option value=\"\">Select Resource</option>\r\n                                {resources.map(r => (\r\n                                    <option key={r.id} value={r.id}>{r.name} ({r.type})</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Date</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                className=\"input\"\r\n                                value={formData.date}\r\n                                onChange={e => setFormData({ ...formData, date: e.target.value })}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1rem' }}>\r\n                            <div className=\"form-group\">\r\n                                <label>Start Time</label>\r\n                                <input\r\n                                    type=\"time\"\r\n                                    className=\"input\"\r\n                                    value={formData.startTime}\r\n                                    onChange={e => setFormData({ ...formData, startTime: e.target.value })}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>End Time</label>\r\n                                <input\r\n                                    type=\"time\"\r\n                                    className=\"input\"\r\n                                    value={formData.endTime}\r\n                                    onChange={e => setFormData({ ...formData, endTime: e.target.value })}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Purpose</label>\r\n                            <textarea\r\n                                className=\"input\"\r\n                                rows=\"3\"\r\n                                value={formData.purpose}\r\n                                onChange={e => setFormData({ ...formData, purpose: e.target.value })}\r\n                                required\r\n                            ></textarea>\r\n                        </div>\r\n                        <button type=\"submit\" className=\"btn btn-primary\">Submit Request</button>\r\n                    </form>\r\n                </div>\r\n\r\n                {/* My Bookings */}\r\n                <div>\r\n                    <h3>My Bookings</h3>\r\n                    {bookings.length === 0 ? (\r\n                        <p>No bookings yet.</p>\r\n                    ) : (\r\n                        <div style={{ marginTop: '1rem', display: 'grid', gap: '1rem' }}>\r\n                            {bookings.map(booking => (\r\n                                <div key={booking.id} style={{\r\n                                    border: '1px solid var(--border-color)',\r\n                                    padding: '1rem',\r\n                                    borderRadius: '0.5rem',\r\n                                    backgroundColor: 'var(--bg-body)'\r\n                                }}>\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\r\n                                        <strong>{booking.Resource?.name}</strong>\r\n                                        <span className={`badge badge-${booking.status === 'approved' ? 'success' : 'warning'}`}>\r\n                                            {booking.status}\r\n                                        </span>\r\n                                    </div>\r\n                                    <p style={{ fontSize: '0.9rem', color: 'var(--text-secondary)' }}>\r\n                                        {new Date(booking.startTime).toLocaleDateString()} <br />\r\n                                        {new Date(booking.startTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} -\r\n                                        {new Date(booking.endTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                    </p>\r\n                                    <p style={{ fontSize: '0.9rem', marginTop: '0.5rem' }}>{booking.purpose}</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Resources;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\member\\Support.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  33 |\n  34 |     useEffect(() => {\n> 35 |         fetchData();\n     |         ^^^^^^^^^ Avoid calling setState() directly within an effect\n  36 |     }, []);\n  37 |\n  38 |     const handleSubmitReport = async (e) => {","line":35,"column":9,"nodeType":null,"endLine":35,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Support = () => {\r\n    const [reports, setReports] = useState([]);\r\n    const [messages, setMessages] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [activeTab, setActiveTab] = useState('reports'); // 'reports' or 'inbox'\r\n    const [formData, setFormData] = useState({\r\n        category: 'academic',\r\n        subject: '',\r\n        description: ''\r\n    });\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const headers = { Authorization: `Bearer ${token}` };\r\n\r\n            const [resReports, resMessages] = await Promise.all([\r\n                axios.get('http://localhost:5000/api/communication/my-reports', { headers }),\r\n                axios.get('http://localhost:5000/api/communication/inbox', { headers })\r\n            ]);\r\n\r\n            setReports(resReports.data);\r\n            setMessages(resMessages.data);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleSubmitReport = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            await axios.post('http://localhost:5000/api/communication/report', formData, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n\r\n            alert('Report submitted successfully');\r\n            setFormData({ category: 'academic', subject: '', description: '' });\r\n            fetchData(); // Refresh reports\r\n        } catch (error) {\r\n            alert('Error submitting report');\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"card animate-fade-up\">\r\n            <h2 style={{ marginBottom: '2rem' }}>Communication Center</h2>\r\n\r\n            <div style={{ display: 'flex', gap: '1rem', marginBottom: '2rem', borderBottom: '1px solid var(--border-color)' }}>\r\n                <button\r\n                    className={`btn ${activeTab === 'reports' ? 'btn-primary' : 'btn-secondary'}`}\r\n                    onClick={() => setActiveTab('reports')}\r\n                >\r\n                    Problem Reports\r\n                </button>\r\n                <button\r\n                    className={`btn ${activeTab === 'inbox' ? 'btn-primary' : 'btn-secondary'}`}\r\n                    onClick={() => setActiveTab('inbox')}\r\n                >\r\n                    Inbox ({messages.length})\r\n                </button>\r\n            </div>\r\n\r\n            {activeTab === 'reports' && (\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '2rem' }}>\r\n                    {/* Report Form */}\r\n                    <div>\r\n                        <h3>Submit a Report</h3>\r\n                        <form onSubmit={handleSubmitReport} style={{ marginTop: '1rem' }}>\r\n                            <div className=\"form-group\">\r\n                                <label>Category</label>\r\n                                <select\r\n                                    className=\"input\"\r\n                                    value={formData.category}\r\n                                    onChange={e => setFormData({ ...formData, category: e.target.value })}\r\n                                >\r\n                                    <option value=\"academic\">Academic</option>\r\n                                    <option value=\"facility\">Facility</option>\r\n                                    <option value=\"administrative\">Administrative</option>\r\n                                    <option value=\"other\">Other</option>\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Subject</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"input\"\r\n                                    value={formData.subject}\r\n                                    onChange={e => setFormData({ ...formData, subject: e.target.value })}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Description</label>\r\n                                <textarea\r\n                                    className=\"input\"\r\n                                    rows=\"4\"\r\n                                    value={formData.description}\r\n                                    onChange={e => setFormData({ ...formData, description: e.target.value })}\r\n                                    required\r\n                                ></textarea>\r\n                            </div>\r\n                            <button type=\"submit\" className=\"btn btn-primary\">Submit Report</button>\r\n                        </form>\r\n                    </div>\r\n\r\n                    {/* My Reports */}\r\n                    <div>\r\n                        <h3>My Reports</h3>\r\n                        {reports.length === 0 ? (\r\n                            <p>No reports submitted.</p>\r\n                        ) : (\r\n                            <div style={{ marginTop: '1rem', display: 'grid', gap: '1rem' }}>\r\n                                {reports.map(report => (\r\n                                    <div key={report.id} style={{\r\n                                        border: '1px solid var(--border-color)',\r\n                                        padding: '1rem',\r\n                                        borderRadius: '0.5rem',\r\n                                        backgroundColor: 'var(--bg-body)'\r\n                                    }}>\r\n                                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\r\n                                            <strong>{report.subject}</strong>\r\n                                            <span className={`badge badge-${report.status === 'resolved' ? 'success' : 'warning'}`}>\r\n                                                {report.status}\r\n                                            </span>\r\n                                        </div>\r\n                                        <p style={{ fontSize: '0.9rem', color: 'var(--text-secondary)' }}>\r\n                                            Category: {report.category} | {new Date(report.createdAt).toLocaleDateString()}\r\n                                        </p>\r\n                                        <p style={{ fontSize: '0.9rem', marginTop: '0.5rem' }}>{report.description}</p>\r\n                                        {report.response && (\r\n                                            <div style={{ marginTop: '0.5rem', padding: '0.5rem', backgroundColor: 'rgba(0,255,0,0.1)', borderRadius: '0.25rem' }}>\r\n                                                <strong>Response:</strong> {report.response}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {activeTab === 'inbox' && (\r\n                <div>\r\n                    <h3>Inbox</h3>\r\n                    {messages.length === 0 ? (\r\n                        <p>No messages received.</p>\r\n                    ) : (\r\n                        <div style={{ marginTop: '1rem', display: 'grid', gap: '1rem' }}>\r\n                            {messages.map(msg => (\r\n                                <div key={msg.id} style={{\r\n                                    border: '1px solid var(--border-color)',\r\n                                    padding: '1rem',\r\n                                    borderRadius: '0.5rem',\r\n                                    backgroundColor: 'var(--bg-body)'\r\n                                }}>\r\n                                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '0.5rem' }}>\r\n                                        <strong>{msg.subject}</strong>\r\n                                        <span style={{ fontSize: '0.8rem', color: 'var(--text-muted)' }}>\r\n                                            {new Date(msg.createdAt).toLocaleDateString()}\r\n                                        </span>\r\n                                    </div>\r\n                                    <p style={{ fontSize: '0.9rem', color: 'var(--text-secondary)', marginBottom: '0.5rem' }}>\r\n                                        From: {msg.sender?.firstName} {msg.sender?.lastName} ({msg.sender?.role})\r\n                                    </p>\r\n                                    <p>{msg.content}</p>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Support;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\member\\Tasks.jsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n  23 |\n  24 |     useEffect(() => {\n> 25 |         fetchTasks();\n     |         ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  26 |     }, []);\n  27 |\n  28 |     const handleFileUpload = async (e) => {","line":25,"column":9,"nodeType":null,"endLine":25,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Tasks = () => {\r\n    const [tasks, setTasks] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedTask, setSelectedTask] = useState(null);\r\n    const [reportFile, setReportFile] = useState(null);\r\n\r\n    const fetchTasks = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const res = await axios.get('http://localhost:5000/api/tasks/my-tasks', {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setTasks(res.data);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error fetching tasks:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchTasks();\r\n    }, []);\r\n\r\n    const handleFileUpload = async (e) => {\r\n        e.preventDefault();\r\n        if (!reportFile || !selectedTask) return;\r\n\r\n        const formData = new FormData();\r\n        formData.append('report', reportFile);\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            await axios.put(`http://localhost:5000/api/tasks/${selectedTask.id}`, formData, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            });\r\n            alert('Report uploaded successfully');\r\n            setSelectedTask(null);\r\n            setReportFile(null);\r\n            fetchTasks();\r\n        } catch (error) {\r\n            alert('Error uploading report');\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    const getStatusBadge = (status) => {\r\n        switch (status) {\r\n            case 'completed': return <span className=\"badge badge-success\">Completed</span>;\r\n            case 'in_progress': return <span className=\"badge badge-warning\">In Progress</span>;\r\n            default: return <span className=\"badge badge-secondary\">Pending</span>;\r\n        }\r\n    };\r\n\r\n    if (loading) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"card animate-fade-up\">\r\n            <h2 style={{ marginBottom: '2rem' }}>My Tasks</h2>\r\n\r\n            {tasks.length === 0 ? (\r\n                <p>No tasks assigned yet.</p>\r\n            ) : (\r\n                <div style={{ display: 'grid', gap: '1.5rem' }}>\r\n                    {tasks.map(task => (\r\n                        <div key={task.id} style={{\r\n                            border: '1px solid var(--border-color)',\r\n                            padding: '1.5rem',\r\n                            borderRadius: '0.5rem',\r\n                            backgroundColor: 'var(--bg-body)'\r\n                        }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '1rem' }}>\r\n                                <div>\r\n                                    <h3 style={{ marginBottom: '0.5rem' }}>{task.title}</h3>\r\n                                    <p style={{ color: 'var(--text-secondary)', fontSize: '0.9rem' }}>\r\n                                        Assigned by: {task.assigner?.firstName} {task.assigner?.lastName}\r\n                                    </p>\r\n                                </div>\r\n                                {getStatusBadge(task.status)}\r\n                            </div>\r\n\r\n                            <p style={{ marginBottom: '1rem' }}>{task.description}</p>\r\n\r\n                            {task.dueDate && (\r\n                                <p style={{ fontSize: '0.9rem', color: 'var(--text-muted)', marginBottom: '1rem' }}>\r\n                                    Due: {new Date(task.dueDate).toLocaleDateString()}\r\n                                </p>\r\n                            )}\r\n\r\n                            {task.status !== 'completed' && (\r\n                                <div>\r\n                                    <button\r\n                                        className=\"btn btn-secondary\"\r\n                                        onClick={() => setSelectedTask(selectedTask?.id === task.id ? null : task)}\r\n                                    >\r\n                                        {selectedTask?.id === task.id ? 'Cancel' : 'Submit Report'}\r\n                                    </button>\r\n\r\n                                    {selectedTask?.id === task.id && (\r\n                                        <form onSubmit={handleFileUpload} style={{ marginTop: '1rem', display: 'flex', gap: '1rem', alignItems: 'center' }}>\r\n                                            <input\r\n                                                type=\"file\"\r\n                                                onChange={e => setReportFile(e.target.files[0])}\r\n                                                required\r\n                                            />\r\n                                            <button type=\"submit\" className=\"btn btn-primary\">Upload</button>\r\n                                        </form>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n\r\n                            {task.reportUrl && (\r\n                                <div style={{ marginTop: '1rem' }}>\r\n                                    <a href={`http://localhost:5000${task.reportUrl}`} target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: 'var(--primary)' }}>\r\n                                        View Submitted Report\r\n                                    </a>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Tasks;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\member\\Vote.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\president\\Analytics.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\president\\Broadcast.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\president\\Departments.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\president\\Elections.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[250,257],"text":""},"desc":"Remove unused variable 'motion'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { api } from '../../../utils/api';\r\nimport {\r\n    Vote,\r\n    Plus,\r\n    UserPlus,\r\n    Calendar,\r\n    Clock,\r\n    TrendingUp,\r\n    AlertTriangle,\r\n    CheckCircle\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    Legend,\r\n    ResponsiveContainer,\r\n    Cell\r\n} from 'recharts';\r\n\r\nconst Elections = () => {\r\n    const [elections, setElections] = useState([]);\r\n    const [liveResults, setLiveResults] = useState(null);\r\n    const [view, setView] = useState('manage'); // 'manage', 'live'\r\n    const [formData, setFormData] = useState({ title: '', startDate: '', endDate: '' });\r\n    const [showCandidateModal, setShowCandidateModal] = useState(false);\r\n    const [selectedElection, setSelectedElection] = useState(null);\r\n    const [candidateData, setCandidateData] = useState({ userId: '', position: 'President', manifesto: '', description: '', photo: null });\r\n    const [users, setUsers] = useState([]);\r\n    const [userSearch, setUserSearch] = useState('');\r\n\r\n    useEffect(() => {\r\n        fetchElections();\r\n        fetchUsers();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        let interval;\r\n        if (view === 'live') {\r\n            fetchLiveResults();\r\n            interval = setInterval(fetchLiveResults, 5000); // Poll every 5 seconds\r\n        }\r\n        return () => clearInterval(interval);\r\n    }, [view]);\r\n\r\n    const fetchElections = async () => {\r\n        try {\r\n            const data = await api.get('/president/elections');\r\n            setElections(data);\r\n        } catch (error) {\r\n            console.error('Error fetching elections:', error);\r\n        }\r\n    };\r\n\r\n    const fetchUsers = async () => {\r\n        try {\r\n            const res = await api.get('/president/members');\r\n            setUsers(res);\r\n        } catch (error) {\r\n            console.error('Error fetching users:', error);\r\n        }\r\n    };\r\n\r\n    const fetchLiveResults = async () => {\r\n        try {\r\n            const res = await api.get('/president/elections/live');\r\n            setLiveResults(res.data);\r\n        } catch (error) {\r\n            console.error('Error fetching live results:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await api.post('/president/elections', formData);\r\n            alert('Election created successfully');\r\n            setElections([res.data, ...elections]);\r\n            setFormData({ title: '', startDate: '', endDate: '' });\r\n        } catch (error) {\r\n            alert('Error creating election: ' + error.message);\r\n        }\r\n    };\r\n\r\n    const handleAddCandidate = async (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData();\r\n        formData.append('userId', candidateData.userId);\r\n        formData.append('position', candidateData.position);\r\n        formData.append('manifesto', candidateData.manifesto);\r\n        formData.append('description', candidateData.description);\r\n        if (candidateData.photo) {\r\n            formData.append('photo', candidateData.photo);\r\n        }\r\n\r\n        try {\r\n            const token = JSON.parse(localStorage.getItem('user')).token;\r\n            const res = await fetch(`http://localhost:5000/api/president/elections/${selectedElection.id}/candidates`, {\r\n                method: 'POST',\r\n                headers: { 'Authorization': `Bearer ${token}` },\r\n                body: formData\r\n            });\r\n\r\n            if (!res.ok) throw new Error(await res.text());\r\n\r\n            alert('Candidate added successfully');\r\n            setShowCandidateModal(false);\r\n            setCandidateData({ userId: '', position: 'President', manifesto: '', description: '', photo: null });\r\n            fetchElections();\r\n        } catch (error) {\r\n            alert('Error adding candidate: ' + error.message);\r\n        }\r\n    };\r\n\r\n    const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8'];\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-fade-in\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-3xl font-bold flex items-center gap-3\">\r\n                    <Vote className=\"text-[var(--primary)]\" />\r\n                    Election Control Center\r\n                </h2>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setView('manage')}\r\n                        className={`btn ${view === 'manage' ? 'btn-primary' : 'bg-[var(--bg-card)]'}`}\r\n                    >\r\n                        Manage Elections\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setView('live')}\r\n                        className={`btn ${view === 'live' ? 'btn-primary' : 'bg-[var(--bg-card)]'} flex items-center gap-2`}\r\n                    >\r\n                        <TrendingUp size={18} />\r\n                        Live Monitor\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {view === 'live' ? (\r\n                <div className=\"space-y-6\">\r\n                    {!liveResults?.active ? (\r\n                        <div className=\"card text-center py-12\">\r\n                            <AlertTriangle size={48} className=\"mx-auto text-yellow-500 mb-4\" />\r\n                            <h3 className=\"text-xl font-bold\">No Active Election</h3>\r\n                            <p className=\"text-[var(--text-secondary)]\">Start an election to see live results.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"card bg-gradient-to-r from-[var(--primary)] to-[var(--primary-dark)] text-white\">\r\n                                <div className=\"flex justify-between items-center\">\r\n                                    <div>\r\n                                        <h3 className=\"text-2xl font-bold\">{liveResults.election.title}</h3>\r\n                                        <p className=\"opacity-90\">Live Voting in Progress</p>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-2 bg-white/20 px-4 py-2 rounded-full animate-pulse\">\r\n                                        <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\r\n                                        <span className=\"font-bold text-sm\">LIVE</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                                <motion.div\r\n                                    initial={{ opacity: 0, x: -20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    className=\"card\"\r\n                                >\r\n                                    <h3 className=\"font-bold mb-4\">Vote Distribution</h3>\r\n                                    <div className=\"h-80\">\r\n                                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                            <BarChart data={liveResults.results} layout=\"vertical\">\r\n                                                <CartesianGrid strokeDasharray=\"3 3\" />\r\n                                                <XAxis type=\"number\" />\r\n                                                <YAxis dataKey=\"name\" type=\"category\" width={100} />\r\n                                                <Tooltip />\r\n                                                <Bar dataKey=\"votes\" fill=\"var(--primary)\">\r\n                                                    {liveResults.results.map((entry, index) => (\r\n                                                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                                                    ))}\r\n                                                </Bar>\r\n                                            </BarChart>\r\n                                        </ResponsiveContainer>\r\n                                    </div>\r\n                                </motion.div>\r\n\r\n                                <div className=\"space-y-4\">\r\n                                    {liveResults.results.sort((a, b) => b.votes - a.votes).map((candidate, index) => (\r\n                                        <motion.div\r\n                                            key={candidate.id}\r\n                                            initial={{ opacity: 0, y: 20 }}\r\n                                            animate={{ opacity: 1, y: 0 }}\r\n                                            transition={{ delay: index * 0.1 }}\r\n                                            className=\"card flex items-center gap-4\"\r\n                                        >\r\n                                            <div className=\"w-12 h-12 rounded-full bg-gray-200 overflow-hidden\">\r\n                                                {candidate.photoUrl ? (\r\n                                                    <img src={`http://localhost:5000${candidate.photoUrl}`} alt={candidate.name} className=\"w-full h-full object-cover\" />\r\n                                                ) : (\r\n                                                    <div className=\"w-full h-full flex items-center justify-center text-gray-500 font-bold\">\r\n                                                        {candidate.name[0]}\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"flex-1\">\r\n                                                <div className=\"flex justify-between items-center mb-1\">\r\n                                                    <h4 className=\"font-bold\">{candidate.name}</h4>\r\n                                                    <span className=\"text-xl font-bold text-[var(--primary)]\">{candidate.votes}</span>\r\n                                                </div>\r\n                                                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                                                    <div\r\n                                                        className=\"bg-[var(--primary)] h-2 rounded-full transition-all duration-1000\"\r\n                                                        style={{ width: `${(candidate.votes / Math.max(...liveResults.results.map(r => r.votes), 1)) * 100}%` }}\r\n                                                    ></div>\r\n                                                </div>\r\n                                                <p className=\"text-xs text-[var(--text-secondary)] mt-1\">{candidate.position}</p>\r\n                                            </div>\r\n                                            {index === 0 && <CheckCircle className=\"text-green-500\" />}\r\n                                        </motion.div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    <div className=\"lg:col-span-1 space-y-6\">\r\n                        <div className=\"card border-t-4 border-[var(--primary)]\">\r\n                            <h3 className=\"font-bold mb-4\">Create Election</h3>\r\n                            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Title</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className=\"input\"\r\n                                        value={formData.title}\r\n                                        onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Start Date</label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        className=\"input\"\r\n                                        value={formData.startDate}\r\n                                        onChange={(e) => setFormData({ ...formData, startDate: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">End Date</label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        className=\"input\"\r\n                                        value={formData.endDate}\r\n                                        onChange={(e) => setFormData({ ...formData, endDate: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <button type=\"submit\" className=\"btn btn-primary w-full flex items-center justify-center gap-2\">\r\n                                    <Plus size={18} /> Create Election\r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"lg:col-span-2 space-y-4\">\r\n                        <h3 className=\"font-bold text-lg\">Election Timeline</h3>\r\n                        {elections.length === 0 ? (\r\n                            <p className=\"text-[var(--text-secondary)]\">No elections found.</p>\r\n                        ) : (\r\n                            elections.map((election, index) => (\r\n                                <motion.div\r\n                                    key={election.id}\r\n                                    initial={{ opacity: 0, x: 20 }}\r\n                                    animate={{ opacity: 1, x: 0 }}\r\n                                    transition={{ delay: index * 0.1 }}\r\n                                    className=\"card relative overflow-hidden\"\r\n                                >\r\n                                    <div className={`absolute left-0 top-0 bottom-0 w-1 ${election.status === 'ongoing' ? 'bg-green-500' : 'bg-gray-300'}`}></div>\r\n                                    <div className=\"flex justify-between items-start pl-4\">\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-lg\">{election.title}</h4>\r\n                                            <div className=\"flex gap-4 text-sm text-[var(--text-secondary)] mt-1\">\r\n                                                <span className=\"flex items-center gap-1\"><Calendar size={14} /> {new Date(election.startDate).toLocaleDateString()} - {new Date(election.endDate).toLocaleDateString()}</span>\r\n                                                <span className=\"flex items-center gap-1\"><UserPlus size={14} /> {election.Candidates?.length || 0} Candidates</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex flex-col items-end gap-2\">\r\n                                            <span className={`badge ${election.status === 'ongoing' ? 'badge-success' : 'badge-secondary'}`}>\r\n                                                {election.status}\r\n                                            </span>\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    setSelectedElection(election);\r\n                                                    setShowCandidateModal(true);\r\n                                                }}\r\n                                                className=\"text-sm text-[var(--primary)] hover:underline flex items-center gap-1\"\r\n                                            >\r\n                                                <UserPlus size={14} /> Add Candidate\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </motion.div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Candidate Modal */}\r\n            <AnimatePresence>\r\n                {showCandidateModal && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\"\r\n                    >\r\n                        <motion.div\r\n                            initial={{ scale: 0.9, opacity: 0 }}\r\n                            animate={{ scale: 1, opacity: 1 }}\r\n                            exit={{ scale: 0.9, opacity: 0 }}\r\n                            className=\"card w-full max-w-lg max-h-[90vh] overflow-y-auto\"\r\n                        >\r\n                            <h3 className=\"font-bold text-xl mb-4\">Add Candidate to {selectedElection?.title}</h3>\r\n                            <form onSubmit={handleAddCandidate} className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Search & Select User</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className=\"input mb-2\"\r\n                                        placeholder=\"Search by name or student ID...\"\r\n                                        value={userSearch}\r\n                                        onChange={e => setUserSearch(e.target.value)}\r\n                                    />\r\n                                    <select\r\n                                        className=\"input\"\r\n                                        value={candidateData.userId}\r\n                                        onChange={e => setCandidateData({ ...candidateData, userId: e.target.value })}\r\n                                        required\r\n                                        size=\"5\"\r\n                                        style={{ minHeight: '120px' }}\r\n                                    >\r\n                                        <option value=\"\">Select a user...</option>\r\n                                        {users\r\n                                            .filter(user => {\r\n                                                const searchLower = userSearch.toLowerCase();\r\n                                                return (\r\n                                                    user.firstName?.toLowerCase().includes(searchLower) ||\r\n                                                    user.lastName?.toLowerCase().includes(searchLower) ||\r\n                                                    user.studentId?.toLowerCase().includes(searchLower)\r\n                                                );\r\n                                            })\r\n                                            .map(user => (\r\n                                                <option key={user.id} value={user.id}>\r\n                                                    {user.firstName} {user.lastName} ({user.studentId}) - {user.department || 'No Dept'}\r\n                                                </option>\r\n                                            ))}\r\n                                    </select>\r\n                                    <p className=\"text-xs text-[var(--text-secondary)] mt-1\">\r\n                                        {users.length} total users available\r\n                                    </p>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Position</label>\r\n                                    <select\r\n                                        className=\"input\"\r\n                                        value={candidateData.position}\r\n                                        onChange={e => setCandidateData({ ...candidateData, position: e.target.value })}\r\n                                    >\r\n                                        <option value=\"President\">President</option>\r\n                                        <option value=\"Vice President\">Vice President</option>\r\n                                        <option value=\"Secretary\">Secretary</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Manifesto</label>\r\n                                    <textarea\r\n                                        className=\"input\"\r\n                                        value={candidateData.manifesto}\r\n                                        onChange={e => setCandidateData({ ...candidateData, manifesto: e.target.value })}\r\n                                        rows=\"3\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Description</label>\r\n                                    <textarea\r\n                                        className=\"input\"\r\n                                        value={candidateData.description}\r\n                                        onChange={e => setCandidateData({ ...candidateData, description: e.target.value })}\r\n                                        rows=\"3\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Photo</label>\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        className=\"input\"\r\n                                        onChange={e => setCandidateData({ ...candidateData, photo: e.target.files[0] })}\r\n                                        accept=\"image/*\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div className=\"flex justify-end gap-2 pt-4\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"btn bg-gray-200 text-gray-700\"\r\n                                        onClick={() => setShowCandidateModal(false)}\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button type=\"submit\" className=\"btn btn-primary\">Add Candidate</button>\r\n                                </div>\r\n                            </form>\r\n                        </motion.div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default Elections;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\president\\Events.jsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchEvents` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  20 |\n  21 |     useEffect(() => {\n> 22 |         fetchEvents();\n     |         ^^^^^^^^^^^ `fetchEvents` accessed before it is declared\n  23 |     }, []);\n  24 |\n  25 |     const fetchEvents = async () => {\n\n  23 |     }, []);\n  24 |\n> 25 |     const fetchEvents = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 26 |         try {\n     | ^^^^^^^^^^^^^\n> 27 |             const res = await api.get('/president/events');\n     | ^^^^^^^^^^^^^\n> 28 |             setEvents(res.data);\n     | ^^^^^^^^^^^^^\n> 29 |         } catch (error) {\n     | ^^^^^^^^^^^^^\n> 30 |             console.error('Error fetching events:', error);\n     | ^^^^^^^^^^^^^\n> 31 |         }\n     | ^^^^^^^^^^^^^\n> 32 |     };\n     | ^^^^^^^ `fetchEvents` is declared here\n  33 |\n  34 |     const handleSubmit = async (e) => {\n  35 |         e.preventDefault();","line":22,"column":9,"nodeType":null,"endLine":22,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { api } from '../../../utils/api';\r\nimport {\r\n    Calendar as CalendarIcon,\r\n    Plus,\r\n    Check,\r\n    X,\r\n    MapPin,\r\n    Clock,\r\n    Filter,\r\n    MoreHorizontal\r\n} from 'lucide-react';\r\nimport { AnimatePresence } from 'framer-motion';\r\n\r\nconst Events = () => {\r\n    const [events, setEvents] = useState([]);\r\n    const [formData, setFormData] = useState({ title: '', date: '', time: '', venue: '', description: '' });\r\n    const [view, setView] = useState('list'); // 'list', 'calendar', 'approval'\r\n    const [showForm, setShowForm] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchEvents();\r\n    }, []);\r\n\r\n    const fetchEvents = async () => {\r\n        try {\r\n            const res = await api.get('/president/events');\r\n            setEvents(res.data);\r\n        } catch (error) {\r\n            console.error('Error fetching events:', error);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const res = await api.post('/president/events', formData);\r\n            alert('Event created successfully');\r\n            setEvents([...events, res.data]);\r\n            setFormData({ title: '', date: '', time: '', venue: '', description: '' });\r\n            setShowForm(false);\r\n        } catch (error) {\r\n            alert('Error creating event: ' + error.message);\r\n        }\r\n    };\r\n\r\n    const handleStatusUpdate = async (id, status) => {\r\n        try {\r\n            const res = await api.put(`/president/events/${id}/status`, { status });\r\n            setEvents(events.map(e => e.id === id ? res.data : e));\r\n        } catch {\r\n            alert('Error updating status');\r\n        }\r\n    };\r\n\r\n    const pendingEvents = events.filter(e => e.status === 'pending');\r\n    const approvedEvents = events.filter(e => e.status === 'approved');\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-fade-in\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-3xl font-bold flex items-center gap-3\">\r\n                    <CalendarIcon className=\"text-[var(--primary)]\" />\r\n                    Event Management\r\n                </h2>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setView('list')}\r\n                        className={`btn ${view === 'list' ? 'btn-primary' : 'bg-[var(--bg-card)]'}`}\r\n                    >\r\n                        List\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setView('approval')}\r\n                        className={`btn relative ${view === 'approval' ? 'btn-primary' : 'bg-[var(--bg-card)]'}`}\r\n                    >\r\n                        Approval\r\n                        {pendingEvents.length > 0 && (\r\n                            <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs flex items-center justify-center\">\r\n                                {pendingEvents.length}\r\n                            </span>\r\n                        )}\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setShowForm(!showForm)}\r\n                        className=\"btn bg-green-600 text-white flex items-center gap-2\"\r\n                    >\r\n                        <Plus size={18} />\r\n                        New Event\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <AnimatePresence>\r\n                {showForm && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, height: 0 }}\r\n                        animate={{ opacity: 1, height: 'auto' }}\r\n                        exit={{ opacity: 0, height: 0 }}\r\n                        className=\"overflow-hidden\"\r\n                    >\r\n                        <div className=\"card mb-6 border border-[var(--primary)]\">\r\n                            <h3 className=\"font-bold mb-4\">Create New Event</h3>\r\n                            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                    <div>\r\n                                        <label className=\"block mb-1 text-sm font-medium\">Title</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            className=\"input\"\r\n                                            value={formData.title}\r\n                                            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block mb-1 text-sm font-medium\">Venue</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            className=\"input\"\r\n                                            value={formData.venue}\r\n                                            onChange={(e) => setFormData({ ...formData, venue: e.target.value })}\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block mb-1 text-sm font-medium\">Date</label>\r\n                                        <input\r\n                                            type=\"date\"\r\n                                            className=\"input\"\r\n                                            value={formData.date}\r\n                                            onChange={(e) => setFormData({ ...formData, date: e.target.value })}\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block mb-1 text-sm font-medium\">Time</label>\r\n                                        <input\r\n                                            type=\"time\"\r\n                                            className=\"input\"\r\n                                            value={formData.time}\r\n                                            onChange={(e) => setFormData({ ...formData, time: e.target.value })}\r\n                                            required\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Description</label>\r\n                                    <textarea\r\n                                        className=\"input\"\r\n                                        rows=\"3\"\r\n                                        value={formData.description}\r\n                                        onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                                    ></textarea>\r\n                                </div>\r\n                                <div className=\"flex justify-end gap-2\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => setShowForm(false)}\r\n                                        className=\"btn bg-gray-200 text-gray-700\"\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button type=\"submit\" className=\"btn btn-primary\">Create Event</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n            {view === 'approval' ? (\r\n                <div className=\"space-y-4\">\r\n                    <h3 className=\"font-bold text-lg\">Pending Approval ({pendingEvents.length})</h3>\r\n                    {pendingEvents.length === 0 ? (\r\n                        <p className=\"text-[var(--text-secondary)]\">No pending events.</p>\r\n                    ) : (\r\n                        pendingEvents.map(event => (\r\n                            <motion.div\r\n                                key={event.id}\r\n                                layout\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                                className=\"card flex flex-col md:flex-row justify-between items-start md:items-center gap-4 border-l-4 border-yellow-500\"\r\n                            >\r\n                                <div>\r\n                                    <h4 className=\"font-bold text-lg\">{event.title}</h4>\r\n                                    <div className=\"flex gap-4 text-sm text-[var(--text-secondary)] mt-1\">\r\n                                        <span className=\"flex items-center gap-1\"><CalendarIcon size={14} /> {event.date}</span>\r\n                                        <span className=\"flex items-center gap-1\"><Clock size={14} /> {event.time}</span>\r\n                                        <span className=\"flex items-center gap-1\"><MapPin size={14} /> {event.venue}</span>\r\n                                    </div>\r\n                                    <p className=\"mt-2 text-sm\">{event.description}</p>\r\n                                </div>\r\n                                <div className=\"flex gap-2\">\r\n                                    <button\r\n                                        onClick={() => handleStatusUpdate(event.id, 'approved')}\r\n                                        className=\"btn bg-green-100 text-green-700 hover:bg-green-200 flex items-center gap-2\"\r\n                                    >\r\n                                        <Check size={18} /> Approve\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleStatusUpdate(event.id, 'rejected')}\r\n                                        className=\"btn bg-red-100 text-red-700 hover:bg-red-200 flex items-center gap-2\"\r\n                                    >\r\n                                        <X size={18} /> Reject\r\n                                    </button>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {approvedEvents.map((event, index) => (\r\n                        <motion.div\r\n                            key={event.id}\r\n                            initial={{ opacity: 0, y: 20 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: index * 0.1 }}\r\n                            className=\"card hover:shadow-lg transition-shadow\"\r\n                        >\r\n                            <div className=\"flex justify-between items-start mb-4\">\r\n                                <div className=\"bg-[var(--bg-secondary)] p-3 rounded-lg text-center min-w-[60px]\">\r\n                                    <div className=\"text-xs font-bold uppercase text-[var(--primary)]\">\r\n                                        {new Date(event.date).toLocaleString('default', { month: 'short' })}\r\n                                    </div>\r\n                                    <div className=\"text-xl font-bold\">\r\n                                        {new Date(event.date).getDate()}\r\n                                    </div>\r\n                                </div>\r\n                                <div className={`badge ${event.status === 'approved' ? 'badge-success' : 'badge-warning'}`}>\r\n                                    {event.status}\r\n                                </div>\r\n                            </div>\r\n                            <h4 className=\"font-bold text-lg mb-2 line-clamp-1\">{event.title}</h4>\r\n                            <div className=\"space-y-2 text-sm text-[var(--text-secondary)] mb-4\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <Clock size={16} /> {event.time}\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <MapPin size={16} /> {event.venue}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex justify-between items-center pt-4 border-t border-[var(--border-color)]\">\r\n                                <span className=\"text-xs text-[var(--text-secondary)]\">\r\n                                    Created by ID: {event.createdBy}\r\n                                </span>\r\n                                <button className=\"p-2 hover:bg-[var(--bg-secondary)] rounded-full text-[var(--text-secondary)]\">\r\n                                    <MoreHorizontal size={20} />\r\n                                </button>\r\n                            </div>\r\n                        </motion.div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Events;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\president\\MemberManagement.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[223,262],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchData` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n  34 |\n  35 |     useEffect(() => {\n> 36 |         fetchData();\n     |         ^^^^^^^^^ `fetchData` accessed before it is declared\n  37 |     }, [filter]);\n  38 |\n  39 |     const fetchData = async () => {\n\n  37 |     }, [filter]);\n  38 |\n> 39 |     const fetchData = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 40 |         try {\n     | ^^^^^^^^^^^^^\n> 41 |             const token = localStorage.getItem('token');\n     ΓÇª\n     | ^^^^^^^^^^^^^\n> 60 |         }\n     | ^^^^^^^^^^^^^\n> 61 |     };\n     | ^^^^^^^ `fetchData` is declared here\n  62 |\n  63 |     const handleStatusUpdate = async (id, status) => {\n  64 |         try {","line":36,"column":9,"nodeType":null,"endLine":36,"endColumn":18},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":37,"column":8,"nodeType":"ArrayExpression","endLine":37,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData, filter]","fix":{"range":[869,877],"text":"[fetchData, filter]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":70,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":70,"endColumn":23}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n    Users,\r\n    CheckCircle,\r\n    XCircle,\r\n    Search,\r\n    Filter,\r\n    Download,\r\n    BarChart2,\r\n    PieChart\r\n} from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport {\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    Legend,\r\n    ResponsiveContainer,\r\n    PieChart as RePieChart,\r\n    Pie,\r\n    Cell\r\n} from 'recharts';\r\n\r\nconst MemberManagement = () => {\r\n    const [members, setMembers] = useState([]);\r\n    const [analytics, setAnalytics] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [filter, setFilter] = useState({ status: '', department: '', search: '' });\r\n    const [view, setView] = useState('list'); // 'list' or 'analytics'\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [filter]);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const headers = { Authorization: `Bearer ${token}` };\r\n\r\n            const params = new URLSearchParams();\r\n            if (filter.status) params.append('status', filter.status);\r\n            if (filter.department) params.append('department', filter.department);\r\n            if (filter.search) params.append('search', filter.search);\r\n\r\n            const [resMembers, resAnalytics] = await Promise.all([\r\n                axios.get(`http://localhost:5000/api/president/members?${params.toString()}`, { headers }),\r\n                axios.get('http://localhost:5000/api/president/analytics/members', { headers })\r\n            ]);\r\n\r\n            setMembers(resMembers.data);\r\n            setAnalytics(resAnalytics.data);\r\n            setLoading(false);\r\n        } catch (error) {\r\n            console.error('Error fetching data:', error);\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleStatusUpdate = async (id, status) => {\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            await axios.put(`http://localhost:5000/api/president/members/${id}/status`, { status }, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            fetchData(); // Refresh data\r\n        } catch (error) {\r\n            alert('Error updating status');\r\n        }\r\n    };\r\n\r\n    const COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#8884d8'];\r\n\r\n    if (loading) return <div className=\"flex items-center justify-center h-64\">Loading...</div>;\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-fade-in\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-3xl font-bold flex items-center gap-3\">\r\n                    <Users className=\"text-[var(--primary)]\" />\r\n                    Member Management\r\n                </h2>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setView('list')}\r\n                        className={`btn ${view === 'list' ? 'btn-primary' : 'bg-[var(--bg-card)]'}`}\r\n                    >\r\n                        List View\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setView('analytics')}\r\n                        className={`btn ${view === 'analytics' ? 'btn-primary' : 'bg-[var(--bg-card)]'}`}\r\n                    >\r\n                        Analytics\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className=\"card flex items-center justify-between\"\r\n                >\r\n                    <div>\r\n                        <p className=\"text-[var(--text-secondary)]\">Total Members</p>\r\n                        <h3 className=\"text-4xl font-bold\">{analytics?.totalMembers}</h3>\r\n                    </div>\r\n                    <Users size={40} className=\"text-[var(--primary)] opacity-50\" />\r\n                </motion.div>\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.1 }}\r\n                    className=\"card flex items-center justify-between\"\r\n                >\r\n                    <div>\r\n                        <p className=\"text-[var(--text-secondary)]\">Active Members</p>\r\n                        <h3 className=\"text-4xl font-bold text-green-500\">{analytics?.activeMembers}</h3>\r\n                    </div>\r\n                    <CheckCircle size={40} className=\"text-green-500 opacity-50\" />\r\n                </motion.div>\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    transition={{ delay: 0.2 }}\r\n                    className=\"card flex items-center justify-between\"\r\n                >\r\n                    <div>\r\n                        <p className=\"text-[var(--text-secondary)]\">Pending Approval</p>\r\n                        <h3 className=\"text-4xl font-bold text-yellow-500\">{analytics?.pendingMembers}</h3>\r\n                    </div>\r\n                    <Filter size={40} className=\"text-yellow-500 opacity-50\" />\r\n                </motion.div>\r\n            </div>\r\n\r\n            {view === 'list' ? (\r\n                <div className=\"card\">\r\n                    {/* Filters */}\r\n                    <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\r\n                        <div className=\"relative flex-1\">\r\n                            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-[var(--text-secondary)]\" size={20} />\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search members...\"\r\n                                className=\"input pl-10 mb-0\"\r\n                                value={filter.search}\r\n                                onChange={e => setFilter({ ...filter, search: e.target.value })}\r\n                            />\r\n                        </div>\r\n                        <select\r\n                            className=\"input md:w-48 mb-0\"\r\n                            value={filter.department}\r\n                            onChange={e => setFilter({ ...filter, department: e.target.value })}\r\n                        >\r\n                            <option value=\"\">All Departments</option>\r\n                            {analytics?.departmentDistribution.map(d => (\r\n                                <option key={d.department} value={d.department}>{d.department}</option>\r\n                            ))}\r\n                        </select>\r\n                        <select\r\n                            className=\"input md:w-48 mb-0\"\r\n                            value={filter.status}\r\n                            onChange={e => setFilter({ ...filter, status: e.target.value })}\r\n                        >\r\n                            <option value=\"\">All Status</option>\r\n                            <option value=\"approved\">Approved</option>\r\n                            <option value=\"pending\">Pending</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    {/* Table */}\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full border-collapse\">\r\n                            <thead>\r\n                                <tr className=\"text-left border-b border-[var(--border-color)]\">\r\n                                    <th className=\"p-4\">Name</th>\r\n                                    <th className=\"p-4\">ID</th>\r\n                                    <th className=\"p-4\">Department</th>\r\n                                    <th className=\"p-4\">Year</th>\r\n                                    <th className=\"p-4\">Status</th>\r\n                                    <th className=\"p-4\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {members.map((member, index) => (\r\n                                    <motion.tr\r\n                                        key={member.id}\r\n                                        initial={{ opacity: 0, x: -20 }}\r\n                                        animate={{ opacity: 1, x: 0 }}\r\n                                        transition={{ delay: index * 0.05 }}\r\n                                        className=\"border-b border-[var(--border-color)] hover:bg-[var(--bg-secondary)] transition-colors\"\r\n                                    >\r\n                                        <td className=\"p-4 flex items-center gap-3\">\r\n                                            <div className=\"w-8 h-8 rounded-full bg-[var(--primary)] flex items-center justify-center text-white text-xs\">\r\n                                                {member.firstName[0]}\r\n                                            </div>\r\n                                            <div>\r\n                                                <div className=\"font-semibold\">{member.firstName} {member.lastName}</div>\r\n                                                <div className=\"text-xs text-[var(--text-secondary)]\">{member.email}</div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"p-4\">{member.studentId}</td>\r\n                                        <td className=\"p-4\">{member.department}</td>\r\n                                        <td className=\"p-4\">{member.academicYear}</td>\r\n                                        <td className=\"p-4\">\r\n                                            <span className={`badge ${member.isApproved ? 'badge-success' : 'badge-warning'}`}>\r\n                                                {member.isApproved ? 'Active' : 'Pending'}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"p-4 flex gap-2\">\r\n                                            {!member.isApproved && (\r\n                                                <button\r\n                                                    onClick={() => handleStatusUpdate(member.id, 'approved')}\r\n                                                    className=\"p-2 text-green-500 hover:bg-green-50 rounded\"\r\n                                                    title=\"Approve\"\r\n                                                >\r\n                                                    <CheckCircle size={20} />\r\n                                                </button>\r\n                                            )}\r\n                                            <button\r\n                                                onClick={() => handleStatusUpdate(member.id, 'rejected')}\r\n                                                className=\"p-2 text-red-500 hover:bg-red-50 rounded\"\r\n                                                title=\"Reject/Remove\"\r\n                                            >\r\n                                                <XCircle size={20} />\r\n                                            </button>\r\n                                        </td>\r\n                                    </motion.tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.9 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        className=\"card\"\r\n                    >\r\n                        <h3 className=\"text-xl font-bold mb-4\">Department Distribution</h3>\r\n                        <div className=\"h-80\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <RePieChart>\r\n                                    <Pie\r\n                                        data={analytics?.departmentDistribution}\r\n                                        cx=\"50%\"\r\n                                        cy=\"50%\"\r\n                                        labelLine={false}\r\n                                        label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\r\n                                        outerRadius={80}\r\n                                        fill=\"#8884d8\"\r\n                                        dataKey=\"count\"\r\n                                    >\r\n                                        {analytics?.departmentDistribution.map((entry, index) => (\r\n                                            <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                                        ))}\r\n                                    </Pie>\r\n                                    <Tooltip />\r\n                                    <Legend />\r\n                                </RePieChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </motion.div>\r\n\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.9 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        transition={{ delay: 0.1 }}\r\n                        className=\"card\"\r\n                    >\r\n                        <h3 className=\"text-xl font-bold mb-4\">Academic Year Distribution</h3>\r\n                        <div className=\"h-80\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <BarChart data={analytics?.yearDistribution}>\r\n                                    <CartesianGrid strokeDasharray=\"3 3\" />\r\n                                    <XAxis dataKey=\"academicYear\" />\r\n                                    <YAxis />\r\n                                    <Tooltip />\r\n                                    <Legend />\r\n                                    <Bar dataKey=\"count\" fill=\"var(--primary)\" />\r\n                                </BarChart>\r\n                            </ResponsiveContainer>\r\n                        </div>\r\n                    </motion.div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MemberManagement;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\president\\PresidentInbox.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":12,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[250,257],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProblems'. Either include it or remove the dependency array.","line":22,"column":8,"nodeType":"ArrayExpression","endLine":22,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [fetchProblems, filter]","fix":{"range":[633,641],"text":"[fetchProblems, filter]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":44,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { api } from '../../../utils/api';\r\nimport {\r\n    Inbox as InboxIcon,\r\n    Filter,\r\n    CheckCircle,\r\n    Clock,\r\n    AlertTriangle,\r\n    MessageSquare,\r\n    User\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\nconst PresidentInbox = () => {\r\n    const [problems, setProblems] = useState([]);\r\n    const [selectedProblem, setSelectedProblem] = useState(null);\r\n    const [filter, setFilter] = useState({ category: '', status: '' });\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchProblems();\r\n    }, [filter]);\r\n\r\n    const fetchProblems = async () => {\r\n        try {\r\n            const params = new URLSearchParams();\r\n            if (filter.category) params.append('category', filter.category);\r\n            if (filter.status) params.append('status', filter.status);\r\n\r\n            const res = await api.get(`/president/inbox?${params.toString()}`);\r\n            setProblems(res.data);\r\n        } catch (error) {\r\n            console.error('Error fetching problems:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleStatusUpdate = async (id, status, resolution = '') => {\r\n        try {\r\n            const res = await api.put(`/president/inbox/${id}/status`, { status, resolution });\r\n            setProblems(problems.map(p => p.id === id ? res.data : p));\r\n            setSelectedProblem(null);\r\n        } catch (error) {\r\n            alert('Error updating status');\r\n        }\r\n    };\r\n\r\n    const getCategoryColor = (category) => {\r\n        switch (category) {\r\n            case 'technical': return 'text-blue-600 bg-blue-100';\r\n            case 'academic': return 'text-purple-600 bg-purple-100';\r\n            case 'administrative': return 'text-orange-600 bg-orange-100';\r\n            case 'facilities': return 'text-green-600 bg-green-100';\r\n            default: return 'text-gray-600 bg-gray-100';\r\n        }\r\n    };\r\n\r\n    const getStatusIcon = (status) => {\r\n        switch (status) {\r\n            case 'resolved': return <CheckCircle className=\"text-green-500\" />;\r\n            case 'in-progress': return <Clock className=\"text-yellow-500\" />;\r\n            default: return <AlertTriangle className=\"text-red-500\" />;\r\n        }\r\n    };\r\n\r\n    const stats = {\r\n        total: problems.length,\r\n        pending: problems.filter(p => p.status === 'pending').length,\r\n        inProgress: problems.filter(p => p.status === 'in-progress').length,\r\n        resolved: problems.filter(p => p.status === 'resolved').length\r\n    };\r\n\r\n    if (loading) return <div className=\"flex items-center justify-center h-64\">Loading inbox...</div>;\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-fade-in\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-3xl font-bold flex items-center gap-3\">\r\n                    <InboxIcon className=\"text-[var(--primary)]\" />\r\n                    Executive Inbox\r\n                </h2>\r\n            </div>\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                <div className=\"card bg-gradient-to-br from-blue-500 to-blue-600 text-white\">\r\n                    <div className=\"text-3xl font-bold mb-1\">{stats.total}</div>\r\n                    <div className=\"text-sm opacity-90\">Total Reports</div>\r\n                </div>\r\n                <div className=\"card bg-gradient-to-br from-red-500 to-red-600 text-white\">\r\n                    <div className=\"text-3xl font-bold mb-1\">{stats.pending}</div>\r\n                    <div className=\"text-sm opacity-90\">Pending</div>\r\n                </div>\r\n                <div className=\"card bg-gradient-to-br from-yellow-500 to-yellow-600 text-white\">\r\n                    <div className=\"text-3xl font-bold mb-1\">{stats.inProgress}</div>\r\n                    <div className=\"text-sm opacity-90\">In Progress</div>\r\n                </div>\r\n                <div className=\"card bg-gradient-to-br from-green-500 to-green-600 text-white\">\r\n                    <div className=\"text-3xl font-bold mb-1\">{stats.resolved}</div>\r\n                    <div className=\"text-sm opacity-90\">Resolved</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"card\">\r\n                <div className=\"flex gap-4 items-center\">\r\n                    <Filter size={20} className=\"text-[var(--text-secondary)]\" />\r\n                    <select\r\n                        className=\"input flex-1\"\r\n                        value={filter.category}\r\n                        onChange={(e) => setFilter({ ...filter, category: e.target.value })}\r\n                    >\r\n                        <option value=\"\">All Categories</option>\r\n                        <option value=\"technical\">Technical</option>\r\n                        <option value=\"academic\">Academic</option>\r\n                        <option value=\"administrative\">Administrative</option>\r\n                        <option value=\"facilities\">Facilities</option>\r\n                        <option value=\"other\">Other</option>\r\n                    </select>\r\n                    <select\r\n                        className=\"input flex-1\"\r\n                        value={filter.status}\r\n                        onChange={(e) => setFilter({ ...filter, status: e.target.value })}\r\n                    >\r\n                        <option value=\"\">All Statuses</option>\r\n                        <option value=\"pending\">Pending</option>\r\n                        <option value=\"in-progress\">In Progress</option>\r\n                        <option value=\"resolved\">Resolved</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Problem List */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                <div className=\"space-y-4\">\r\n                    {problems.length === 0 ? (\r\n                        <p className=\"text-[var(--text-secondary)]\">No problem reports found.</p>\r\n                    ) : (\r\n                        problems.map((problem, index) => (\r\n                            <motion.div\r\n                                key={problem.id}\r\n                                initial={{ opacity: 0, x: -20 }}\r\n                                animate={{ opacity: 1, x: 0 }}\r\n                                transition={{ delay: index * 0.05 }}\r\n                                onClick={() => setSelectedProblem(problem)}\r\n                                className={`card cursor-pointer transition-all hover:shadow-lg ${selectedProblem?.id === problem.id ? 'ring-2 ring-[var(--primary)]' : ''\r\n                                    }`}\r\n                            >\r\n                                <div className=\"flex justify-between items-start mb-3\">\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        {getStatusIcon(problem.status)}\r\n                                        <h3 className=\"font-bold\">{problem.title}</h3>\r\n                                    </div>\r\n                                    <span className={`badge ${getCategoryColor(problem.category)}`}>\r\n                                        {problem.category}\r\n                                    </span>\r\n                                </div>\r\n\r\n                                <p className=\"text-sm text-[var(--text-secondary)] line-clamp-2 mb-3\">\r\n                                    {problem.description}\r\n                                </p>\r\n\r\n                                <div className=\"flex justify-between items-center text-xs text-[var(--text-secondary)]\">\r\n                                    <div className=\"flex items-center gap-1\">\r\n                                        <User size={14} />\r\n                                        {problem.User ? `${problem.User.firstName} ${problem.User.lastName}` : 'Anonymous'}\r\n                                    </div>\r\n                                    <div>{new Date(problem.createdAt).toLocaleDateString()}</div>\r\n                                </div>\r\n                            </motion.div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n\r\n                {/* Problem Detail */}\r\n                <AnimatePresence>\r\n                    {selectedProblem && (\r\n                        <motion.div\r\n                            initial={{ opacity: 0, x: 20 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            exit={{ opacity: 0, x: 20 }}\r\n                            className=\"card sticky top-6\"\r\n                        >\r\n                            <h3 className=\"font-bold text-xl mb-4\">{selectedProblem.title}</h3>\r\n\r\n                            <div className=\"space-y-4 mb-6\">\r\n                                <div>\r\n                                    <span className=\"text-sm font-medium text-[var(--text-secondary)]\">Category:</span>\r\n                                    <span className={`ml-2 badge ${getCategoryColor(selectedProblem.category)}`}>\r\n                                        {selectedProblem.category}\r\n                                    </span>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <span className=\"text-sm font-medium text-[var(--text-secondary)]\">Status:</span>\r\n                                    <span className=\"ml-2 badge\">\r\n                                        {selectedProblem.status}\r\n                                    </span>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <span className=\"text-sm font-medium text-[var(--text-secondary)]\">Submitted by:</span>\r\n                                    <span className=\"ml-2\">\r\n                                        {selectedProblem.User\r\n                                            ? `${selectedProblem.User.firstName} ${selectedProblem.User.lastName} (${selectedProblem.User.studentId})`\r\n                                            : 'Anonymous'\r\n                                        }\r\n                                    </span>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <span className=\"text-sm font-medium text-[var(--text-secondary)]\">Date:</span>\r\n                                    <span className=\"ml-2\">{new Date(selectedProblem.createdAt).toLocaleString()}</span>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <span className=\"text-sm font-medium text-[var(--text-secondary)] block mb-2\">Description:</span>\r\n                                    <p className=\"text-sm bg-[var(--bg-secondary)] p-3 rounded\">\r\n                                        {selectedProblem.description}\r\n                                    </p>\r\n                                </div>\r\n\r\n                                {selectedProblem.resolution && (\r\n                                    <div>\r\n                                        <span className=\"text-sm font-medium text-[var(--text-secondary)] block mb-2\">Resolution:</span>\r\n                                        <p className=\"text-sm bg-green-50 p-3 rounded border border-green-200\">\r\n                                            {selectedProblem.resolution}\r\n                                        </p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {selectedProblem.status !== 'resolved' && (\r\n                                <div className=\"space-y-3 pt-4 border-t border-[var(--border-color)]\">\r\n                                    <button\r\n                                        onClick={() => handleStatusUpdate(selectedProblem.id, 'in-progress')}\r\n                                        className=\"btn bg-yellow-100 text-yellow-700 hover:bg-yellow-200 w-full\"\r\n                                    >\r\n                                        Mark as In Progress\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            const resolution = prompt('Enter resolution notes:');\r\n                                            if (resolution) {\r\n                                                handleStatusUpdate(selectedProblem.id, 'resolved', resolution);\r\n                                            }\r\n                                        }}\r\n                                        className=\"btn bg-green-100 text-green-700 hover:bg-green-200 w-full\"\r\n                                    >\r\n                                        Mark as Resolved\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PresidentInbox;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\president\\SystemAdmin.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^[A-Z_]/u.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[245,284],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchArchives'. Either include it or remove the dependency array.","line":33,"column":8,"nodeType":"ArrayExpression","endLine":33,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchArchives, view]","fix":{"range":[964,970],"text":"[fetchArchives, view]"}}]},{"ruleId":"no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":74,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":74,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\nimport { api } from '../../../utils/api';\r\nimport {\r\n    Settings,\r\n    Users,\r\n    Shield,\r\n    Activity,\r\n    Archive as ArchiveIcon,\r\n    Search,\r\n    Plus,\r\n    FileText\r\n} from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst SystemAdmin = () => {\r\n    const [view, setView] = useState('audit'); // 'audit', 'users', 'archives'\r\n    const [auditLogs, setAuditLogs] = useState([]);\r\n    const [archives, setArchives] = useState([]);\r\n    const [archiveForm, setArchiveForm] = useState({\r\n        title: '',\r\n        description: '',\r\n        category: 'document',\r\n        year: new Date().getFullYear(),\r\n        fileUrl: '',\r\n        metadata: {}\r\n    });\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (view === 'audit') fetchAuditLogs();\r\n        if (view === 'archives') fetchArchives();\r\n    }, [view]);\r\n\r\n    const fetchAuditLogs = async () => {\r\n        try {\r\n            const res = await api.get('/president/system/audit-logs?limit=100');\r\n            setAuditLogs(res.data);\r\n        } catch (error) {\r\n            console.error('Error fetching audit logs:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const fetchArchives = async () => {\r\n        try {\r\n            const params = new URLSearchParams();\r\n            if (searchTerm) params.append('search', searchTerm);\r\n\r\n            const res = await api.get(`/president/archives?${params.toString()}`);\r\n            setArchives(res.data);\r\n        } catch (error) {\r\n            console.error('Error fetching archives:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreateArchive = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await api.post('/president/archives', archiveForm);\r\n            alert('Archive created successfully!');\r\n            setArchiveForm({\r\n                title: '',\r\n                description: '',\r\n                category: 'document',\r\n                year: new Date().getFullYear(),\r\n                fileUrl: '',\r\n                metadata: {}\r\n            });\r\n            fetchArchives();\r\n        } catch (error) {\r\n            alert('Error creating archive');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-6 animate-fade-in\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-3xl font-bold flex items-center gap-3\">\r\n                    <Settings className=\"text-[var(--primary)]\" />\r\n                    System Administration\r\n                </h2>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => setView('audit')}\r\n                        className={`btn ${view === 'audit' ? 'btn-primary' : 'bg-[var(--bg-card)]'} flex items-center gap-2`}\r\n                    >\r\n                        <Activity size={18} />\r\n                        Audit Logs\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setView('archives')}\r\n                        className={`btn ${view === 'archives' ? 'btn-primary' : 'bg-[var(--bg-card)]'} flex items-center gap-2`}\r\n                    >\r\n                        <ArchiveIcon size={18} />\r\n                        Archives\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {view === 'audit' && (\r\n                <div className=\"card\">\r\n                    <h3 className=\"font-bold text-xl mb-4 flex items-center gap-2\">\r\n                        <Activity size={20} />\r\n                        System Audit Logs\r\n                    </h3>\r\n\r\n                    {loading ? (\r\n                        <p>Loading audit logs...</p>\r\n                    ) : auditLogs.length === 0 ? (\r\n                        <p className=\"text-[var(--text-secondary)]\">No audit logs found.</p>\r\n                    ) : (\r\n                        <div className=\"overflow-x-auto\">\r\n                            <table className=\"w-full\">\r\n                                <thead>\r\n                                    <tr className=\"border-b border-[var(--border-color)]\">\r\n                                        <th className=\"text-left p-3\">Timestamp</th>\r\n                                        <th className=\"text-left p-3\">User</th>\r\n                                        <th className=\"text-left p-3\">Action</th>\r\n                                        <th className=\"text-left p-3\">Entity</th>\r\n                                        <th className=\"text-left p-3\">IP Address</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {auditLogs.map((log, index) => (\r\n                                        <motion.tr\r\n                                            key={log.id}\r\n                                            initial={{ opacity: 0 }}\r\n                                            animate={{ opacity: 1 }}\r\n                                            transition={{ delay: index * 0.02 }}\r\n                                            className=\"border-b border-[var(--border-color)] hover:bg-[var(--bg-secondary)]\"\r\n                                        >\r\n                                            <td className=\"p-3 text-sm\">\r\n                                                {new Date(log.createdAt).toLocaleString()}\r\n                                            </td>\r\n                                            <td className=\"p-3\">\r\n                                                {log.User ? `${log.User.firstName} ${log.User.lastName}` : 'System'}\r\n                                            </td>\r\n                                            <td className=\"p-3\">\r\n                                                <span className=\"badge badge-secondary\">{log.action}</span>\r\n                                            </td>\r\n                                            <td className=\"p-3 text-sm\">\r\n                                                {log.entityType} #{log.entityId}\r\n                                            </td>\r\n                                            <td className=\"p-3 text-sm text-[var(--text-secondary)]\">\r\n                                                {log.ipAddress || 'N/A'}\r\n                                            </td>\r\n                                        </motion.tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {view === 'archives' && (\r\n                <div className=\"space-y-6\">\r\n                    {/* Create Archive Form */}\r\n                    <div className=\"card\">\r\n                        <h3 className=\"font-bold text-xl mb-4 flex items-center gap-2\">\r\n                            <Plus size={20} />\r\n                            Create Archive Entry\r\n                        </h3>\r\n                        <form onSubmit={handleCreateArchive} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Title</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className=\"input\"\r\n                                        value={archiveForm.title}\r\n                                        onChange={(e) => setArchiveForm({ ...archiveForm, title: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Category</label>\r\n                                    <select\r\n                                        className=\"input\"\r\n                                        value={archiveForm.category}\r\n                                        onChange={(e) => setArchiveForm({ ...archiveForm, category: e.target.value })}\r\n                                    >\r\n                                        <option value=\"event\">Event</option>\r\n                                        <option value=\"election\">Election</option>\r\n                                        <option value=\"meeting\">Meeting</option>\r\n                                        <option value=\"document\">Document</option>\r\n                                        <option value=\"other\">Other</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">Year</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        className=\"input\"\r\n                                        value={archiveForm.year}\r\n                                        onChange={(e) => setArchiveForm({ ...archiveForm, year: parseInt(e.target.value) })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block mb-1 text-sm font-medium\">File URL (optional)</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className=\"input\"\r\n                                        value={archiveForm.fileUrl}\r\n                                        onChange={(e) => setArchiveForm({ ...archiveForm, fileUrl: e.target.value })}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <div>\r\n                                <label className=\"block mb-1 text-sm font-medium\">Description</label>\r\n                                <textarea\r\n                                    className=\"input\"\r\n                                    rows=\"3\"\r\n                                    value={archiveForm.description}\r\n                                    onChange={(e) => setArchiveForm({ ...archiveForm, description: e.target.value })}\r\n                                ></textarea>\r\n                            </div>\r\n                            <button type=\"submit\" className=\"btn btn-primary\">Create Archive</button>\r\n                        </form>\r\n                    </div>\r\n\r\n                    {/* Search Archives */}\r\n                    <div className=\"card\">\r\n                        <div className=\"flex gap-4 items-center mb-4\">\r\n                            <Search size={20} className=\"text-[var(--text-secondary)]\" />\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"input flex-1\"\r\n                                placeholder=\"Search archives...\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                onKeyPress={(e) => e.key === 'Enter' && fetchArchives()}\r\n                            />\r\n                            <button onClick={fetchArchives} className=\"btn btn-primary\">Search</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Archives List */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                        {archives.map((archive, index) => (\r\n                            <motion.div\r\n                                key={archive.id}\r\n                                initial={{ opacity: 0, y: 20 }}\r\n                                animate={{ opacity: 1, y: 0 }}\r\n                                transition={{ delay: index * 0.1 }}\r\n                                className=\"card hover:shadow-lg transition-shadow\"\r\n                            >\r\n                                <div className=\"flex justify-between items-start mb-3\">\r\n                                    <FileText className=\"text-[var(--primary)]\" size={24} />\r\n                                    <span className=\"badge badge-secondary\">{archive.category}</span>\r\n                                </div>\r\n                                <h4 className=\"font-bold text-lg mb-2\">{archive.title}</h4>\r\n                                <p className=\"text-sm text-[var(--text-secondary)] mb-3 line-clamp-2\">\r\n                                    {archive.description}\r\n                                </p>\r\n                                <div className=\"flex justify-between items-center text-xs text-[var(--text-secondary)]\">\r\n                                    <span>Year: {archive.year}</span>\r\n                                    <span>{new Date(archive.createdAt).toLocaleDateString()}</span>\r\n                                </div>\r\n                                {archive.fileUrl && (\r\n                                    <a\r\n                                        href={archive.fileUrl}\r\n                                        target=\"_blank\"\r\n                                        rel=\"noopener noreferrer\"\r\n                                        className=\"mt-3 btn btn-sm bg-blue-100 text-blue-700 hover:bg-blue-200 w-full\"\r\n                                    >\r\n                                        View File\r\n                                    </a>\r\n                                )}\r\n                            </motion.div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SystemAdmin;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\secretary\\Members.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\dashboard\\secretary\\Records.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\public\\About.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\public\\Contact.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\pages\\public\\Home.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ezadin\\.gemini\\antigravity\\playground\\ethereal-flare\\client\\src\\utils\\api.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
